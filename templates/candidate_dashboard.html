{% extends 'base.html' %}

{% block content %}
<div class="container" style="padding-top: 40px;">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Recent Jobs Available</h1>
    <a href="#" class="view-all-link">View all</a>
  </div>

  <!-- Jobs List -->
  <div class="jobs-container">

    <!-- Jobs List -->
    <div id="jobs-list" class="jobs-list">
      <!-- Jobs will be populated here by JavaScript -->
    </div>

    <!-- Empty State -->
    <div id="jobs-empty" class="empty-state">
      <div class="empty-icon">ðŸ’¼</div>
      <h3>No Jobs Available</h3>
      <p>There are currently no job listings available. Please check back later or contact recruiters to post new opportunities.</p>
    </div>
  </div>
</div>

<!-- CHATBOT SIDEBAR (Candidate) -->
<div id="candidate-chat" class="chat-sidebar" aria-hidden="false" style="position:fixed;right:18px;bottom:18px;width:320px;max-height:70vh;display:flex;flex-direction:column;box-shadow:0 6px 20px rgba(0,0,0,0.08);border-radius:8px;background:#fff;overflow:hidden;z-index:1200;">
  <div class="chat-header" style="display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid #eee;background:var(--card);">
    <strong style="font-size:14px">Career Assistant</strong>
    <button id="chat-toggle" class="btn btn-ghost" title="Close chat" style="font-size:18px;line-height:1">Ã—</button>
  </div>

  <div id="chat_box" class="chat-box" style="flex:1;overflow:auto;padding:12px;gap:8px;display:flex;flex-direction:column;">
    <!-- messages inserted here -->
    <div class="msg bot" style="opacity:0.9;font-size:13px;color:#064E3B">Hi â€” ask me about jobs, how to improve your resume, interview tips, or the suitability score.</div>
  </div>

  <form id="chat_form" style="display:flex;padding:10px;border-top:1px solid #eee;gap:8px;align-items:center;">
    <input id="chat_prompt" placeholder="Ask the assistant..." class="input" style="flex:1;padding:8px 10px;border-radius:6px;border:1px solid #e5e7eb;" />
    <button type="button" id="chat_send" class="btn btn-primary">Send</button>
  </form>
</div>

<style>
  /* Minimal chat message styles */
  .chat-box .msg{padding:8px 10px;border-radius:8px;max-width:88%;}
  .chat-box .msg.bot{background:#ECFDF5;color:#064E3B;align-self:flex-start}
  .chat-box .msg.you{background:#EEF2FF;color:#3730A3;align-self:flex-end}
</style>

<!-- APPLY MODAL -->
<div id="apply-backdrop" class="modal-backdrop" role="dialog" aria-modal="true">
  <div class="modal medium-modal">
    <div class="modal-head">
      <div class="modal-title">Apply for Job</div>
      <button class="modal-close" id="close-apply-modal">Ã—</button>
    </div>
    <div class="modal-body">
      <form id="apply-form" class="apply-form">
        <input type="hidden" id="apply-job-id" />

        <div class="job-info" id="job-info-display">
          <h4 id="apply-job-title">Job Title</h4>
          <p id="apply-company-name">Company Name</p>
        </div>

        <div class="form-group">
          <label for="apply-name">Full Name *</label>
          <input id="apply-name" class="input" placeholder="Enter your full name" required />
        </div>

        <div class="form-group">
          <label for="apply-email">Email *</label>
          <input id="apply-email" class="input" type="email" placeholder="Enter your email" required />
        </div>

        <div class="form-group">
          <label for="apply-phone">Phone Number</label>
          <input id="apply-phone" class="input" placeholder="Enter your phone number" />
        </div>

        <div class="form-group">
          <label for="apply-exp">Years of Experience</label>
          <select id="apply-exp" class="input">
            <option value="">Select experience</option>
            <option value="0-1">0-1 years</option>
            <option value="1-3">1-3 years</option>
            <option value="3-5">3-5 years</option>
            <option value="5-10">5-10 years</option>
            <option value="10+">10+ years</option>
          </select>
        </div>

        <div class="form-group">
          <label for="apply-skills">Top Skills</label>
          <input id="apply-skills" class="input" placeholder="JavaScript, Python, React (comma-separated)" />
        </div>

        <div class="form-group">
          <label for="apply-salary">Expected Salary</label>
          <input id="apply-salary" class="input" placeholder="e.g., $50,000 - $70,000" />
        </div>

        <div class="form-group">
          <label for="apply-resume">Upload Resume *</label>
          <input id="apply-resume" class="input" type="file" accept=".pdf,.doc,.docx" required />
          <small class="file-help">Accepted formats: PDF, DOC, DOCX (Max 5MB)</small>
        </div>

        <div class="form-group">
          <label for="cover-letter">Cover Letter (Optional)</label>
          <textarea id="cover-letter" class="input textarea" rows="4" placeholder="Tell us why you're interested in this position..."></textarea>
        </div>

        <div class="btn-row">
          <button type="button" class="btn btn-secondary" id="cancel-application">Cancel</button>
          <button type="submit" class="btn btn-primary" id="submit-application">Submit Application</button>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
